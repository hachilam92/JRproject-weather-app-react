(this["webpackJsonpproject-02-weather-app-react"]=this["webpackJsonpproject-02-weather-app-react"]||[]).push([[0],{19:function(e,t,a){e.exports=a(58)},24:function(e,t,a){},25:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},30:function(e,t,a){},31:function(e,t){function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return a}e.exports={toCelsius:function(e){var t=e-273.15;return t=a(t)},toFahrenheit:function(e){var t=9*(e-273.15)/5+32;return t=a(t)},windDirect:function(e){return["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"][parseInt((e+11.25)/22.5)+1]}}},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),c=a.n(i),o=(a(24),a(25),a(7)),u=a.n(o),s=a(8),l=a(2),h=a(4),d=a(1),p=a(6),m=a(5),y=(a(27),a(28),a(11)),f=(a(30),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).defaultValue="Change country?",n.state={countryValue:n.defaultValue,hideInput:!0},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handleBlur=n.handleBlur.bind(Object(d.a)(n)),n.handleFocus=n.handleFocus.bind(Object(d.a)(n)),n.toggleInput=n.toggleInput.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"toggleInput",value:function(){this.setState({hideInput:!this.state.hideInput,countryValue:this.defaultValue})}},{key:"updateDisplay",value:function(e){this.setState({countryValue:e})}},{key:"handleChange",value:function(e){this.updateDisplay(e.target.value)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onCountryChange(this.state.countryValue),this.toggleInput()}},{key:"handleFocus",value:function(e){this.state.countryValue===this.defaultValue&&this.updateDisplay("")}},{key:"handleBlur",value:function(e){return""===this.state.countryValue?this.toggleInput():this.handleSubmit(e)}},{key:"render",value:function(){var e=this.state,t=e.countryValue,a=e.hideInput;return r.a.createElement("div",{className:"Country"},r.a.createElement("div",{className:"Country__name",onClick:this.toggleInput},this.props.country),a?"":r.a.createElement("form",{className:"Country__form",onSubmit:this.handleSubmit},r.a.createElement("input",{value:t,onChange:this.handleChange,onBlur:this.handleBlur,onFocus:this.handleFocus})))}}]),a}(n.Component)),C=a(31),v=function e(t){Object(l.a)(this,e),this.temperature=C.toCelsius(t.main.temp),this.humidity=t.main.humidity,this.wind=t.wind.speed,this.weather=t.weather[0].main,this.icon=t.weather[0].icon,this.description=t.weather[0].description},g=function e(t,a){Object(l.a)(this,e),this.day=a,this.temperature=Math.round(t.temperature),this.icon=t.icon,this.description=t.description},b=a(32),E="".concat("e787b14540b854a704b00c7a9dfe1342"),k=b.create({baseURL:"https://api.openweathermap.org/data/2.5",params:{appid:E}});function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",a="forecast"===t?"/forecast":"/weather",n=k.get(a,{params:{q:e}});return n}var N=function(e,t){var a="".concat(t,", ").concat(e);return Promise.all([O(a),O(a,"forecast")]).then((function(e){var t=e[0],a=e[1];return{cityName:a.data.city.name,countryCode:a.data.city.country,current:new v(t.data),forecast:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,a=["SUN","MON","TUE","WED","THU","FRI","SAT"],n=new Date,r=n.getDay()-1,i=[],c=0;c<t;c++)r=r===a.length-1?0:r+1,i.push(new g(e[c],a[r]));return i}(function(e){for(var t=[],a=0;a<e.length;a+=8)t.push(e[a]);return t}(a.data.list.map((function(e){return new v(e)}))))}})).catch((function(e){console.log(e.message)}))},_=(a(50),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).defaultValue="Which city?",n.state={cityValue:n.defaultValue},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n.handleFocus=n.handleFocus.bind(Object(d.a)(n)),n.handleBlur=n.handleBlur.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"updateDisplay",value:function(e){this.setState({cityValue:e})}},{key:"resetDisplay",value:function(){this.updateDisplay(this.defaultValue)}},{key:"handleChange",value:function(e){this.updateDisplay(e.target.value)}},{key:"handleFocus",value:function(e){this.state.cityValue===this.defaultValue&&this.updateDisplay("")}},{key:"handleBlur",value:function(e){return""===this.state.cityValue?this.resetDisplay():this.handleSubmit(e)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.checkCityInput(this.state.cityValue,this.props.country)&&this.updateData(this.state.cityValue),this.resetDisplay()}},{key:"updateData",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.toggleLoading(!0),e.next=3,N(this.props.country,t);case 3:if(void 0!==(a=e.sent)){e.next=7;break}return this.props.toggleLoading(!1),e.abrupt("return",alert("country or city can not found"));case 7:this.props.updateDataArray(a),this.props.toggleLoading(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"City"},r.a.createElement("h1",null,this.props.city),r.a.createElement("form",{className:"City__form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"City__form__input",value:this.state.cityValue,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur})))}}]),a}(n.Component));a(51);var j=function(e){return r.a.createElement("div",{className:"CurrentInfo"},r.a.createElement("div",{className:"CurrentInfo__temperature"},r.a.createElement("span",null,e.temperature," \xb0")),r.a.createElement("div",{className:"CurrentInfo__weather"},r.a.createElement("span",null,e.weather)),r.a.createElement("div",{className:"CurrentInfo__details"},r.a.createElement("div",{className:"CurrentInfo__details__item"},r.a.createElement("span",null,"HUMIDITY"),r.a.createElement("br",null),r.a.createElement("span",null,e.humidity,"%")),r.a.createElement("div",{className:"division"}),r.a.createElement("div",{className:"CurrentInfo__details__item"},r.a.createElement("span",null,"WIND"),r.a.createElement("br",null),r.a.createElement("span",null,e.wind," K/M"))))},w=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={countryCode:n.props.children.countryCode},n.onCountryChange=n.onCountryChange.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"updateCountryCode",value:function(e){this.setState({countryCode:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.children.countryCode;t!==e.children.countryCode&&this.updateCountryCode(t)}},{key:"getCountryCode",value:function(e){var t=Object(y.getCode)(e)||Object(y.getName)(e);return!!t&&(t.length>2?e:t)}},{key:"onCountryChange",value:function(e){var t=this.getCountryCode(e);t&&this.updateCountryCode(t.toUpperCase())}},{key:"render",value:function(){var e=this.props.children.current,t=e.temperature,a=e.humidity,n=e.wind,i=e.weather,c=this.props.children.cityName;return r.a.createElement("div",{className:"Current"},r.a.createElement(f,{country:this.state.countryCode,onCountryChange:this.onCountryChange}),r.a.createElement(j,{temperature:t,humidity:a,wind:n,weather:i}),r.a.createElement(_,{city:c,country:this.state.countryCode,checkCityInput:this.props.checkCityInput,toggleLoading:this.props.toggleLoading,updateDataArray:this.props.updateDataArray,onCityChange:this.props.onCityChange}),r.a.createElement("div",{className:"CurrentBottom"}))}}]),a}(n.Component),I=(a(52),a(53),function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){e.props.onOtherCitiesClick(e.props.index)},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.city,a=e.temperature,n=e.icon,i=e.description;return r.a.createElement("button",{className:"OtherCityButton",onClick:this.handleClick},r.a.createElement("h3",{className:"OtherCityButton__city"},t),r.a.createElement("div",{className:"OtherCityButton__temperature"},Math.round(a)," \xb0"),r.a.createElement("div",{className:"OtherCityButton__icon"},r.a.createElement("img",{src:"http://openweathermap.org/img/wn/".concat(n,".png"),alt:i})))}}]),a}(n.Component));var D=function(e){var t=e.cityArray.map((function(t,a){return r.a.createElement(I,{key:"".concat(t.countryCode).concat(t.cityName),city:t.cityName,temperature:t.current.temperature,icon:t.current.icon,description:t.current.description,onOtherCitiesClick:e.onOtherCitiesClick,index:a})}));return r.a.createElement("div",{className:"OtherCityButtons"},t)};var S=function(e){return r.a.createElement("div",{className:"OtherCity"},r.a.createElement("h2",{className:"OtherCity__title"},"Other Cities"),r.a.createElement(D,{cityArray:e.cityArray,onOtherCitiesClick:e.onOtherCitiesClick}))};a(54);var A=function(e){var t="http://openweathermap.org/img/wn/".concat(e.info.icon,"@2x.png");return r.a.createElement("div",{className:"ForecastList__Item"},r.a.createElement("h3",{className:"ForecastList__Item__day"},e.info.day),r.a.createElement("img",{className:"ForecastList__Item__icon",src:t,alt:e.info.description}),r.a.createElement("div",{className:"ForecastList__Item__temperature"},e.info.temperature," \xb0"))};var V=function(e){var t=e.forecastArray.map((function(e){return r.a.createElement(A,{key:e.day,info:e})}));return r.a.createElement("div",{className:"ForecastList"},t)};var B=function(e){return r.a.createElement("div",{className:"ForecastWeather"},r.a.createElement("h2",{className:"ForecastWeather__title"},"Forecast"),r.a.createElement(V,{forecastArray:e.forecastArray}))};var F=function(e){var t=e.children.slice(1),a=e.children[0].forecast;return r.a.createElement("div",{className:"WeatherBottom"},r.a.createElement(S,{cityArray:t,onOtherCitiesClick:e.onOtherCitiesClick}),r.a.createElement("div",{className:"division"}),r.a.createElement(B,{forecastArray:a}))},L=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={loading:!0,dataArray:[]},n.defaultCountry="AU",n.defaultCity=["Melbourne","Sydney","Brisbane","Perth"],n.onOtherCitiesClick=n.onOtherCitiesClick.bind(Object(d.a)(n)),n.toggleLoading=n.toggleLoading.bind(Object(d.a)(n)),n.checkCityInput=n.checkCityInput.bind(Object(d.a)(n)),n.updateDataArray=n.updateDataArray.bind(Object(d.a)(n)),n}return Object(h.a)(a,[{key:"toggleLoading",value:function(e){this.setState({loading:e})}},{key:"setDataArray",value:function(e){this.setState({dataArray:e})}},{key:"checkCityInput",value:function(e,t){var a=this.state.dataArray.findIndex((function(a){return a.cityName.toUpperCase()===e.toUpperCase()&&a.countryCode===t}));return a>0?(this.onOtherCitiesClick(a-1),!1):0!==a}},{key:"updateDataArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.state.dataArray.map((function(e){return e})),n=t?a.splice(t,1)[0]:e;a.unshift(n),e&&a.pop(),this.setDataArray(a)}},{key:"onOtherCitiesClick",value:function(e){var t=e+1;this.updateDataArray(void 0,t)}},{key:"initialRequest",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,n,r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.toggleLoading(!0),t=this.defaultCity,a=this.defaultCountry,n=[],r=0;case 5:if(!(r<t.length)){e.next=14;break}return i=t[r],e.next=9,N(a,i);case 9:c=e.sent,n.push(c);case 11:r++,e.next=5;break;case 14:this.setDataArray(n),this.toggleLoading(!1);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.initialRequest()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.dataArray;return r.a.createElement("div",{className:"Weather"},t?r.a.createElement("div",{className:"Current",style:{borderRadius:"32px"}},r.a.createElement("div",{className:"loading"},"Loading...")):r.a.createElement("div",null,r.a.createElement(w,{checkCityInput:this.checkCityInput,toggleLoading:this.toggleLoading,updateDataArray:this.updateDataArray,onCountryChange:this.onCountryChange},a[0]),r.a.createElement(F,{onOtherCitiesClick:this.onOtherCitiesClick},a)))}}]),a}(n.Component);a(55).config();var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.b84a09e9.chunk.js.map